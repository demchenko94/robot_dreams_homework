# Homework 2: Docker
### –ó–∞–≤–¥–∞–Ω–Ω—è

–£ —Ü—å–æ–º—É –∑–∞–≤–¥–∞–Ω–Ω—ñ –≤–∏ –ø–æ–≤–Ω—ñ—Å—Ç—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∏–∑—É—î—Ç–µ –º—ñ–Ω—ñ-—Å—Ç–µ–∫ —ñ–∑ –¥–≤–æ—Ö —Å–µ—Ä–≤—ñ—Å—ñ–≤ ‚Äî –ø—Ä–∏–º—ñ—Ç–∏–≤–Ω–æ–≥–æ redis-like key/value-—Å—Ö–æ–≤–∏—â–∞ —Ç–∞ kv-server, —â–æ –Ω–∏–º –∫–æ—Ä–∏—Å—Ç—É—î—Ç—å—Å—è.

1. –ù–∞–ø–∏—à–µ—Ç–µ –æ–±–∏–¥–≤–∞ —Å–µ—Ä–≤—ñ—Å–∏ –Ω–∞ Node.js;
2. –ó–±–µ—Ä–µ—Ç–µ –¥–ª—è –Ω–∏—Ö –æ–±—Ä–∞–∑–∏ (–∞–±–æ –Ω–∞ –≤–ª–∞—Å–Ω–æ–º—É –±–∞–∑–æ–≤–æ–º—É –æ–±—Ä–∞–∑—ñ);
3. –û–±‚Äô—î–¥–Ω–∞—î—Ç–µ —ó—Ö —É docker-compose.yml, –ø—Ä–∏—Ö–æ–≤–∞–≤—à–∏ —Å—Ö–æ–≤–∏—â–µ –≤—Å–µ—Ä–µ–¥–∏–Ω—ñ –ø—Ä–∏–≤–∞—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ;
4. –ë–æ–Ω—É—Å: —Ä–µ–∞–ª—ñ–∑—É—î—Ç–µ ‚Äú–Ω–∞—ó–≤–Ω–∏–π‚Äù mini-Compose –Ω–∞ JavaScript, —â–æ–± –Ω–∞–æ—á–Ω–æ –ø–æ–±–∞—á–∏—Ç–∏, —è–∫—É —Ä–æ–±–æ—Ç—É –∑–∞–∑–≤–∏—á–∞–π —Ä–æ–±–∏—Ç—å —Å–ø—Ä–∞–≤–∂–Ω—ñ–π docker-compose.


### –ú–µ—Ç–∞:

* –ó—Ä–æ–∑—É–º—ñ—Ç–∏ –∞–Ω–∞—Ç–æ–º—ñ—é –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞: –±–∞–∑–æ–≤–∏–π Linux-–æ–±—Ä–∞–∑, —à–∞—Ä–∏, –∫–æ—Ä–∏—Å—Ç—É–≤–∞—á, CMD;
* –ù–∞–≤—á–∏—Ç–∏—Å—è –∑–±–∏—Ä–∞—Ç–∏ –≤–ª–∞—Å–Ω—ñ Node-–æ–±—Ä–∞–∑–∏ –π –ø—É–±–ª—ñ–∫—É–≤–∞—Ç–∏ —ó—Ö –Ω–∞ Docker Hub;
* –ü–æ–ø—Ä–∞–∫—Ç–∏–∫—É–≤–∞—Ç–∏—Å—è –∑ –±–∞–≥–∞—Ç–æ—Å–µ—Ä–≤—ñ—Å–Ω–æ—é –∫–æ–Ω—Ñ—ñ–≥—É—Ä–∞—Ü—ñ—î—é: build, volumes, depends_on, networks;
* –ù–∞–ª–∞—à—Ç—É–≤–∞—Ç–∏ Dev-workflow —á–µ—Ä–µ–∑ bind-mount —ñ hot-reload —É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ñ;
* –£—Å–≤—ñ–¥–æ–º–∏—Ç–∏, —â–æ —Ä–æ–±–∏—Ç—å docker-compose –ø—ñ–¥ –∫–∞–ø–æ—Ç–æ–º, —Å—Ç–≤–æ—Ä–∏–≤—à–∏ —Å–ø—Ä–æ—â–µ–Ω–∏–π –∞–Ω–∞–ª–æ–≥.

### –û–ø–∏—Å:
–ö—Ä–æ–∫–∏

1. Redis-like service

1.1 –ù–∞–ø–∏—à—ñ—Ç—å –º—ñ–Ω—ñ–º–∞–ª—å–Ω–∏–π HTTP-—Å–µ—Ä–≤–µ—Ä redis-like (Core Node –∞–±–æ Express):

* GET /get?key=foo ‚Üí {"value":"bar" \| null}
* POST /set body { "key":"foo", "value":"bar" } ‚Üí {"ok":true}

1.2 –°—Ö–æ–≤–∏—â–µ —Ç—Ä–∏–º–∞–π—Ç–µ —É –ø—Ä–æ—Å—Ç–æ–º—É Map.

2. KV-server

2.1 –°—Ç–≤–æ—Ä—ñ—Ç—å –¥—Ä—É–≥–∏–π —Å–µ—Ä–≤—ñ—Å kv-server (Express/Fastify):

* GET /kv/:key —Ç–∞ POST /kv (–∞–Ω–∞–ª–æ–≥—ñ—á–Ω—ñ —Ä–µ–¥—ñ—Å-–µ–Ω–¥–ø–æ—ó–Ω—Ç–∏).

2.2 –ê–¥—Ä–µ—Å—É redis-like –±–µ—Ä—ñ—Ç—å –∑ process.env.REDIS_URL, –ø—ñ–¥–∫–ª—é—á–∞–π—Ç–µ—Å—å HTTP-–∫–ª—ñ—î–Ω—Ç–æ–º (fetch –≤–±—É–¥–æ–≤–∞–Ω–∏–π —É node.js).

üìå –ü—Ä–∏–º—ñ—Ç–∫–∞: —Å–µ—Ä–≤—ñ—Å –ø–æ–≤–∏–Ω–µ–Ω –º–∞—Ç–∏ –ø—Ä–∞—Ü—é—é—á–∏–π linter —è–∫ devDependencies, —â–æ–± —É 4 –∫—Ä–æ—Ü—ñ –±—É–≤ —Å–µ–Ω—Å —É —Ä–æ–∑–¥—ñ–ª–µ–Ω–Ω—ñ –¥–æ–∫–µ—Ä—É –Ω–∞ ‚Äú—Å—Ç–∞–¥—ñ—ó‚Äù.

3. –í–ª–∞—Å–Ω–∏–π –±–∞–∑–æ–≤–∏–π –æ–±—Ä–∞–∑ (optional)

3.1 –°—Ç–≤–æ—Ä—ñ—Ç—å Dockerfile –Ω–∞ –±–∞–∑—ñ –±—É–¥—å-—è–∫–æ–≥–æ –¥–∏—Å—Ç—Ä–∏–±—É—Ç–∏–≤—É (alpine, ubuntu ‚Ä¶), –≤—Å—Ç–∞–Ω–æ–≤—ñ—Ç—å Node LTS;

3.2 –ó–∞–ø—É—à—Ç–µ —É –ø—É–±–ª—ñ—á–Ω–∏–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä—ñ–π Docker Hub —ñ –¥–æ–¥–∞–π—Ç–µ —Ç–µ–≥ latest;

3.3 URL –æ–±—Ä–∞–∑—É –≤–Ω–µ—Å—ñ—Ç—å —É README.

üìå –ü—Ä–∏–º—ñ—Ç–∫–∞: —è–∫—â–æ –Ω–µ –±—É–¥–µ—Ç–µ –≤–∏–∫–æ–Ω—É–≤–∞—Ç–∏ –ø.3 ‚Äî –≤–∏–∫–æ—Ä–∏—Å—Ç–æ–≤—É–π—Ç–µ –æ—Ñ—ñ—Ü—ñ–π–Ω–∏–π node lts –æ–±—Ä–∞–∑.

4. Dockerfile º–∏ —Å–µ—Ä–≤—ñ—Å—ñ–≤ (–Ω–∞ –≤–∞—à–æ–º—É / –æ—Ñ—ñ—Ü—ñ–π–Ω–æ–º—É –æ–±—Ä–∞–∑—ñ)

4.1 .Dockerfile.redis ‚Äî –∑–±–∏—Ä–∞—î redis-like;

4.2 .Dockerfile.kv   ‚Äî –∑–±–∏—Ä–∞—î kv-server:

* –¥–≤—ñ —Å—Ç–∞–¥—ñ—ó (builder ‚Üí runtime) –∞–±–æ –∫–µ—à node_modules;
* EXPOSE 3000.

4.3 .Dockerfile.kv.dev   ‚Äî –∑–±–∏—Ä–∞—î kv-server –∑ hot-reload;

5. Docker-compose.yml
* 2 —Å–µ—Ä–≤—ñ—Å–∏ redis —Ç–∞ kv.dev;
* –æ–∫—Ä–µ–º–∏–π bridge network-alias internal;
* redis ‚Äî –Ω–µ –ø—É–±–ª—ñ–∫—É—î –ø–æ—Ä—Ç –Ω–∞–∑–æ–≤–Ω—ñ;
* kv ‚Äî –º–∞–ø–∏—Ç—å localhost:8080 ‚Üí 3000;
* kv –æ—Ç—Ä–∏–º—É—î REDIS_URL=http://redis:4000.
6. MiniCompose.js(Optional)(***)



### Example of usage:

```bash
  docker build -t kv-server -f docker/kv.Dockerfile . 
  
  docker build -t kv-hot-reload -f docker/kv-dev.Dockerfile .  
  
  docker build -t kv-redis -f docker/redis.Dockerfile .
  
  docker-compose build
  docker-compose up
```
